{"version":3,"sources":["DropZone/DropZone.module.scss","DropZone/DropZone.js","Icon/Icon.js","FileSaver.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","DropZone","useDropzone","acceptedFiles","getRootProps","getInputProps","files","map","file","path","size","className","styles","dropzone","Icon","status","renderIcon","FileSaver","useState","setFiles","proxy","setProxy","throttle","setThrottle","downloadFiles","sleep","a","ms","Promise","resolve","setTimeout","url","includes","image","replace","finalUrl","decodeURI","replaceAll","imagemd5","md5","saveAs","fileName","length","type","accept","onChange","event","input","arr","name","split","extension","dsv","d3","reader","FileReader","onload","parse","target","result","d","readAsText","loadFile","for","value","id","f","i","onClick","App","href","download","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d09669e7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropzone\":\"DropZone_dropzone__3iYWw\"};","import React, { useState } from 'react'\nimport { useDropzone } from 'react-dropzone'\nimport styles from \"./DropZone.module.scss\"\n\nconst DropZone = () => {\n\tconst { acceptedFiles, getRootProps, getInputProps } = useDropzone()\n\n\tconst files = acceptedFiles.map((file) => (\n\t\t<li key={file.path}>\n\t\t\t{file.path} - {file.size} bytes\n\t\t</li>\n\t))\n\n\treturn (\n\t\t<section className=\"container\">\n\t\t\t<div\n\t\t\t\t{...getRootProps({\n\t\t\t\t\tclassName: styles.dropzone,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t<p>Drag 'n' drop some files here, or click to select files</p>\n\t\t\t</div>\n\t\t\t<aside>\n\t\t\t\t<h4>Files</h4>\n\t\t\t\t<ul>{files}</ul>\n\t\t\t</aside>\n\t\t</section>\n\t)\n}\n\nexport default DropZone\n","import React from \"react\"\nimport { BsFileEarmark, BsFileEarmarkArrowDown, BsFileEarmarkCheck } from 'react-icons/bs'\n\n\n\nconst Icon = ({status}) => {\n    const renderIcon = (status)=>{\n      switch (status) {\n        case \"progress\":\n          return <BsFileEarmarkArrowDown />;\n        case \"done\":\n          return <BsFileEarmarkCheck />;\n        default:\n          return <BsFileEarmark />\n      }\n    }\n    return (\n      <>\n        { renderIcon(status) }\n      </>\n    )\n  }\n\n  export default Icon","import React, { useState } from 'react'\nimport DropZone from './DropZone'\nimport Icon from './Icon'\nimport { saveAs } from 'file-saver'\nimport * as d3 from 'd3'\nimport md5 from 'md5'\n\nconst FileSaver = () => {\n\tconst [files, setFiles] = useState([])\n\tconst [proxy, setProxy] = useState('')\n\tconst [throttle, setThrottle] = useState(50)\n\n\tconst loadFile = (input) => {\n\t\tconst file = input.files[0]\n\t\tconst arr = file.name.split('.')\n\t\tconst extension = arr[arr.length - 1]\n\t\tconst dsv = d3.dsvFormat(extension === 'tsv' ? '\\t' : ',')\n\n\t\tconst reader = new FileReader()\n\t\treader.onload = function (event) {\n\t\t\tsetFiles(dsv.parse(event.target.result, (d) => ({ status: 'queued', ...d })))\n\t\t}\n\t\treader.readAsText(file)\n\t}\n\tconst downloadFiles = async () => {\n\t\tfor (const file of files) {\n\t\t\tfile.status = 'progress'\n\t\t\tsetFiles([...files])\n\t\t\t//const res = await fetch(file.url)\n\t\t\t//const blob = await res.blob()\n\t\t\t//console.log(file.url)\n\t\t\tif (file.url && file.url.includes('commons.wikimedia.org')) {\n\t\t\t\tconst baseurl = 'https://upload.wikimedia.org/wikipedia/commons/'\n\t\t\t\tconst image = file.url.replace('http://commons.wikimedia.org/wiki/Special:FilePath/', '')\n\t\t\t\tconst finalUrl = decodeURI(image).replaceAll(' ', '_')\n\t\t\t\tconst imagemd5 = md5(finalUrl)\n\t\t\t\tfile.url = `${baseurl}/${imagemd5[0]}/${imagemd5[0]}${imagemd5[1]}/${finalUrl}`\n\t\t\t}\n\t\t\tsaveAs(proxy + file.url, file.fileName)\n\t\t\t//saveAs(blob, file.fileName)\n\t\t\tawait sleep(throttle)\n\t\t}\n\n\t\tfunction sleep(ms) {\n\t\t\treturn new Promise((resolve) => setTimeout(resolve, ms))\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{!files.length && <input type=\"file\" accept=\".tsv, .csv\" onChange={(event) => loadFile(event.target)} />}\n\t\t\t{!files.length === -2 && <DropZone />}\n\t\t\t<div className=\"mt-3\">\n\t\t\t\t<h6>Settings</h6>\n\t\t\t\t<form>\n\t\t\t\t\t<div className=\"form-row\">\n\t\t\t\t\t\t<div className=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<label for=\"throttle\">throttle (millisec): </label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tvalue={throttle}\n\t\t\t\t\t\t\t\tonChange={(event) => setThrottle(event.target.value)}\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\tstep=\"1\"\n\t\t\t\t\t\t\t\tid=\"throttle\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-row\">\n\t\t\t\t\t\t<div className=\"form-group col-md-6\">\n\t\t\t\t\t\t\t<label for=\"proxy\">\n\t\t\t\t\t\t\t\tproxy url (eg: <kbd>https://api.allorigins.win/raw?url=</kbd>){' '}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input type=\"text\" value={proxy} onChange={(event) => setProxy(event.target.value)} id=\"proxy\" className=\"form-control\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\n\t\t\t{files.length > 0 && (\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{files.map((f, i) => (\n\t\t\t\t\t\t\t<Icon key={i} status={f.status} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type=\"button\" className=\"btn btn-primary\" onClick={() => downloadFiles()}>\n\t\t\t\t\t\tDownload files\n\t\t\t\t\t</button>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t)\n}\n\nexport default FileSaver\n","import FileSaver from \"./FileSaver.js\";\nimport \"./App.scss\";\n\nfunction App() {\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col\">\n          <h1>Download and rename many files</h1>\n          <p>Load a <kbd>.csv</kbd> or a <kbd>.tsv</kbd> with 2 columns:</p>\n          <ul>\n            <li>a <kbd>url</kbd> to the file</li>\n            <li>the <kbd>fileName</kbd> you want to give to the downloaded file (with original extension)</li>\n          </ul>\n          <p>Example datasets? <a href=\"./example.csv\" download>Here</a> and <a href=\"./example.tsv\" download>here</a>.</p>\n          <FileSaver />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}